# ROCK é¡¹ç›®å®Œæ•´æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

**ROCK (Reinforcement Open Construction Kit)** æ˜¯ä¸€ä¸ªæ˜“äºŽä½¿ç”¨ã€å¯å¤§è§„æ¨¡æ‰©å±•çš„çŽ¯å¢ƒç®¡ç†æ¡†æž¶ï¼Œä¸“é—¨ä¸ºagenticå¼ºåŒ–å­¦ä¹ çŽ¯å¢ƒè®¾è®¡ã€‚å®ƒæä¾›äº†æž„å»ºã€ç®¡ç†å’Œè°ƒåº¦å¼ºåŒ–å­¦ä¹ çŽ¯å¢ƒçš„å·¥å…·ï¼Œé€‚ç”¨äºŽå¼€å‘ã€æµ‹è¯•å’Œç ”ç©¶åœºæ™¯ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ðŸš€ **å¤šåè®®åŠ¨ä½œæ”¯æŒ**: æ”¯æŒGEMã€Bashã€Chatç­‰å¤šç§åŠ¨ä½œåè®®
- ðŸ”’ **Sandboxè¿è¡Œæ—¶**: å…·æœ‰çŠ¶æ€çš„è¿è¡Œæ—¶çŽ¯å¢ƒï¼Œå¤šç§éš”ç¦»æœºåˆ¶ç¡®ä¿ä¸€è‡´æ€§å’Œå®‰å…¨æ€§
- ðŸŒ **çµæ´»éƒ¨ç½²**: æ”¯æŒä¸åŒéƒ¨ç½²æ–¹æ³•ï¼Œé€‚åº”å¤šæ ·åŒ–çŽ¯å¢ƒéœ€æ±‚å’Œæ“ä½œç³»ç»Ÿ
- ðŸ”§ **ç»Ÿä¸€SDKæŽ¥å£**: ç®€æ´çš„Python SDKï¼Œç”¨äºŽEnvå’ŒSandboxäº¤äº’
- ðŸ“Š **åˆ†å±‚æœåŠ¡æž¶æž„**: åˆ†å¸ƒå¼Adminã€Workerã€Rockletæž¶æž„å®žçŽ°å¯æ‰©å±•èµ„æºç®¡ç†
- âš¡ **é«˜æ•ˆèµ„æºç®¡ç†**: è‡ªåŠ¨sandboxç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¯é…ç½®èµ„æºåˆ†é…

## ç³»ç»Ÿæž¶æž„

ROCKé‡‡ç”¨åˆ†å¸ƒå¼æž¶æž„è®¾è®¡ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

### æž¶æž„ç»„ä»¶å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ROCK SDK      â”‚    â”‚   ROCK CLI      â”‚    â”‚   ROCK Envhub   â”‚
â”‚  (å¼€å‘å·¥å…·åŒ…)    â”‚    â”‚  (å‘½ä»¤è¡Œå·¥å…·)    â”‚    â”‚   (çŽ¯å¢ƒä»“åº“)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      ROCK Admin           â”‚
                    â”‚     (è°ƒåº¦ç®¡ç†èŠ‚ç‚¹)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                       â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚ ROCK      â”‚         â”‚ ROCK      â”‚         â”‚ ROCK      â”‚
    â”‚ Worker    â”‚         â”‚ Worker    â”‚         â”‚ Worker    â”‚
    â”‚(å·¥ä½œèŠ‚ç‚¹)  â”‚         â”‚(å·¥ä½œèŠ‚ç‚¹)  â”‚         â”‚(å·¥ä½œèŠ‚ç‚¹)  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚                       â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚ Sandbox   â”‚         â”‚ Sandbox   â”‚         â”‚ Sandbox   â”‚
    â”‚(å®¹å™¨çŽ¯å¢ƒ)  â”‚         â”‚(å®¹å™¨çŽ¯å¢ƒ)  â”‚         â”‚(å®¹å™¨çŽ¯å¢ƒ)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 1. ROCK SDK (`rock/sdk/`)

**åŠŸèƒ½**: çŽ¯å¢ƒå¼€å‘å·¥å…·åŒ…ï¼Œä¸ºå¼€å‘è€…æä¾›æž„å»ºã€æ³¨å†Œã€éƒ¨ç½²å’Œè®¿é—®çŽ¯å¢ƒçš„å¼€å‘å·¥å…·ã€‚

**æ ¸å¿ƒæ–‡ä»¶**:
- `__init__.py`: å¯¼å‡º`make`å‡½æ•°ï¼Œå…¼å®¹GEMæ ‡å‡†
- `envs/`: çŽ¯å¢ƒæŽ¥å£å®žçŽ°
- `builder/`: çŽ¯å¢ƒæž„å»ºå™¨
- `common/`: é€šç”¨å·¥å…·
- `sandbox/`: Sandboxå®¢æˆ·ç«¯SDK
- `envhub/`: çŽ¯å¢ƒä»“åº“SDK

**å…³é”®ç‰¹æ€§**:
```python
import rock

# ä½¿ç”¨GEMæ ‡å‡†æŽ¥å£åˆ›å»ºçŽ¯å¢ƒ
env_id = "game:Sokoban-v0-easy"
env = rock.make(env_id)

# å…¼å®¹GEMåè®®çš„è°ƒç”¨æ–¹å¼
observation, info = env.reset(seed=42)
observation, reward, terminated, truncated, info = env.step(action)
env.close()
```

### 2. ROCK CLI (`rock/cli/`)

**åŠŸèƒ½**: å‘½ä»¤è¡ŒæŽ¥å£å·¥å…·ï¼Œå¸®åŠ©ç”¨æˆ·ç®¡ç†å’Œæ“ä½œçŽ¯å¢ƒå’ŒæœåŠ¡ã€‚

**æ ¸å¿ƒæ–‡ä»¶**:
- `main.py`: ä¸»å…¥å£ç‚¹ï¼Œå‘½ä»¤è¡Œå‚æ•°è§£æž
- `command/`: å…·ä½“å‘½ä»¤å®žçŽ°
- `config.py`: é…ç½®ç®¡ç†
- `loader.py`: å‘½ä»¤åŠ è½½å™¨

**ä¸»è¦å‘½ä»¤**:
```bash
# æž„å»ºsandbox
rock sandbox build --image python:3.11 --build-command "pip install -r requirements.txt"

# æŽ¨é€sandboxé•œåƒ
rock sandbox push --image my-app:latest --registry hub.alibaba-inc.com

# è¿è¡Œsandbox
rock sandbox run --image python:3.11 --command "python app.py"

# äº¤äº’å¼è¿è¡Œsandbox
rock sandbox run --image python:3.11 --interactive

# å¯åŠ¨ç®¡ç†æœåŠ¡
rock admin start
```

### 3. ROCK Admin (`rock/admin/`)

**åŠŸèƒ½**: è°ƒåº¦èŠ‚ç‚¹ï¼Œè´Ÿè´£å°†çŽ¯å¢ƒéƒ¨ç½²ä¸ºSandboxï¼Œç®¡ç†Sandboxèµ„æºè°ƒåº¦å’Œåˆ†é…ã€‚

**æ ¸å¿ƒæ¨¡å—**:
- `main.py`: FastAPIæœåŠ¡å…¥å£ï¼ŒHTTP APIæœåŠ¡
- `core/`: æ ¸å¿ƒæœåŠ¡å®žçŽ°
  - `ray_service.py`: Rayåˆ†å¸ƒå¼è®¡ç®—æœåŠ¡
  - `db_provider.py`: æ•°æ®åº“æä¾›è€…
  - `redis_key.py`: Redisé”®ç®¡ç†
  - `sandbox_table.py`: Sandboxè¡¨ç®¡ç†
  - `schema.py`: æ•°æ®æ¨¡å¼å®šä¹‰
- `entrypoints/`: APIç«¯ç‚¹
  - `sandbox_api.py`: Sandboxç®¡ç†API
  - `sandbox_proxy_api.py`: Sandboxä»£ç†API
  - `warmup_api.py`: é¢„çƒ­æœåŠ¡API
- `gem/`: GEMåè®®æ”¯æŒ
- `metrics/`: ç›‘æŽ§å’Œåº¦é‡

**ä¸»è¦APIç«¯ç‚¹**:
- `/apis/envs/sandbox/v1/*`: Sandboxç®¡ç†æŽ¥å£
- `/apis/v1/envs/gem`: GEMçŽ¯å¢ƒæŽ¥å£
- é›†æˆCORSæ”¯æŒã€è¯·æ±‚æ—¥å¿—ã€å¼‚å¸¸å¤„ç†

### 4. ROCK Worker (`rock/sandbox/`)

**åŠŸèƒ½**: å·¥ä½œèŠ‚ç‚¹ï¼Œåˆ†é…æœºå™¨ç‰©ç†èµ„æºç»™Sandboxï¼Œæ‰§è¡Œå…·ä½“çš„Sandboxè¿è¡Œæ—¶ã€‚

**æ ¸å¿ƒæ¨¡å—**:
- `sandbox_manager.py`: Sandboxç®¡ç†å™¨ï¼Œç»§æ‰¿è‡ªBaseManager
- `gem_manager.py`: GEMçŽ¯å¢ƒç®¡ç†å™¨
- `sandbox_actor.py`: Sandbox Actorå®žçŽ°
- `base_manager.py`: åŸºç¡€ç®¡ç†å™¨æŠ½è±¡
- `remote_sandbox.py`: è¿œç¨‹Sandboxè¿è¡Œæ—¶

**å…³é”®åŠŸèƒ½**:
- Rayåˆ†å¸ƒå¼Actorç®¡ç†
- Sandboxç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå¯åŠ¨ã€åœæ­¢ã€çŠ¶æ€ç›‘æŽ§ï¼‰
- æ–‡ä»¶æ“ä½œã€å‘½ä»¤æ‰§è¡Œã€ä¼šè¯ç®¡ç†
- èµ„æºç›‘æŽ§å’Œè‡ªåŠ¨æ¸…ç†
- Redisé›†æˆç”¨äºŽçŠ¶æ€æŒä¹…åŒ–

### 5. ROCK Rocklet (`rock/rocklet/`)

**åŠŸèƒ½**: è½»é‡çº§ä»£ç†æœåŠ¡ç»„ä»¶ï¼Œå¤„ç†SDKåˆ°Sandbox Actioné€šä¿¡ï¼Œæ”¯æŒå¤–éƒ¨äº’è”ç½‘æœåŠ¡è®¿é—®ã€‚

**æ ¸å¿ƒæ–‡ä»¶**:
- `server.py`: FastAPIæœåŠ¡å™¨ï¼Œå¤„ç†HTTPè¯·æ±‚å’Œå“åº”
- `local_api.py`: æœ¬åœ°APIè·¯ç”±
- `local_sandbox.py`: æœ¬åœ°Sandboxå®žçŽ°
- `local_files/`: æœ¬åœ°æ–‡ä»¶èµ„æº

**å…³é”®ç‰¹æ€§**:
- FastAPIå¼‚æ­¥æœåŠ¡å™¨
- å¼‚å¸¸å¤„ç†å’Œé”™è¯¯ä¼ æ’­
- è¯·æ±‚æ—¥å¿—è®°å½•
- è¶…æ—¶ä¸­é—´ä»¶
- è·¯ç”±å‰ç¼€æ”¯æŒSandboxFusion

### 6. ROCK Envhub (`rock/envhub/`)

**åŠŸèƒ½**: çŽ¯å¢ƒä»“åº“ï¼Œæä¾›Environmentæ•°æ®çš„æ³¨å†Œå’Œå­˜å‚¨æœåŠ¡ã€‚

**æ ¸å¿ƒæ¨¡å—**:
- `core/envhub.py`: EnvHubæ ¸å¿ƒå®žçŽ°
- `server.py`: EnvHubæœåŠ¡å™¨
- `api/`: APIæŽ¥å£å®šä¹‰å’Œschemas
- `database/`: æ•°æ®åº“æ¨¡åž‹å’Œæ“ä½œ

**æ ¸å¿ƒç±»**:
- `EnvHub`: æŠ½è±¡åŸºç±»
- `DockerEnvHub`: DockerçŽ¯å¢ƒä¸­å¿ƒå®žçŽ°
- æ”¯æŒçŽ¯å¢ƒæ³¨å†Œã€èŽ·å–ã€åˆ—è¡¨ã€åˆ é™¤æ“ä½œ
- Dockeré•œåƒå¯ç”¨æ€§æ£€æŸ¥
- SQLAlchemyæ•°æ®åº“é›†æˆ

### 7. éƒ¨ç½²ç³»ç»Ÿ (`rock/deployments/`)

**åŠŸèƒ½**: æä¾›å¤šç§éƒ¨ç½²æ–¹å¼ï¼ŒåŒ…æ‹¬Dockerã€Rayã€Localç­‰éƒ¨ç½²ç­–ç•¥ã€‚

**æ ¸å¿ƒæ¨¡å—**:
- `manager.py`: éƒ¨ç½²ç®¡ç†å™¨
- `docker.py`: Dockeréƒ¨ç½²å®žçŽ°
- `ray.py`: Rayéƒ¨ç½²å®žçŽ°
- `local.py`: æœ¬åœ°éƒ¨ç½²å®žçŽ°
- `abstract.py`: éƒ¨ç½²æŠ½è±¡ç±»
- `config.py`: éƒ¨ç½²é…ç½®
- `status.py`: çŠ¶æ€ç®¡ç†
- `runtime_env.py`: è¿è¡Œæ—¶çŽ¯å¢ƒé…ç½®

**éƒ¨ç½²ç‰¹æ€§**:
- æ”¯æŒDockerã€Rayã€æœ¬åœ°å¤šç§éƒ¨ç½²æ–¹å¼
- èµ„æºé™åˆ¶ï¼ˆå†…å­˜ã€CPUï¼‰
- ç«¯å£æ˜ å°„å’Œç½‘ç»œå®‰å…¨
- è‡ªåŠ¨æ¸…ç†æœºåˆ¶
- é•œåƒæž„å»ºå’Œæ‹‰å–
- æŒ‚è½½å·ç®¡ç†

### 8. é…ç½®ç³»ç»Ÿ (`rock/config.py`)

**åŠŸèƒ½**: é›†ä¸­é…ç½®ç®¡ç†ï¼Œæ”¯æŒçŽ¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚

**é…ç½®ç»„ä»¶**:
- `RayConfig`: Rayåˆ†å¸ƒå¼è®¡ç®—é…ç½®
- `WarmupConfig`: é¢„çƒ­æœåŠ¡é…ç½®
- `NacosConfig`: Nacosé…ç½®ä¸­å¿ƒ
- `RedisConfig`: Redisè¿žæŽ¥é…ç½®
- `SandboxConfig`: Sandboxé…ç½®
- `OssConfig`: é˜¿é‡Œäº‘OSSé…ç½®
- `ProxyServiceConfig`: ä»£ç†æœåŠ¡é…ç½®
- `DatabaseConfig`: æ•°æ®åº“é…ç½®
- `RuntimeConfig`: è¿è¡Œæ—¶é…ç½®

**é…ç½®ç‰¹æ€§**:
- æ”¯æŒYAMLé…ç½®æ–‡ä»¶
- çŽ¯å¢ƒå˜é‡è¦†ç›–
- é…ç½®çƒ­æ›´æ–°ï¼ˆé€šè¿‡Nacosï¼‰
- é…ç½®éªŒè¯å’Œé»˜è®¤å€¼
- åˆ†å±‚é…ç½®ç®¡ç†

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **Python 3.10+**: ä¸»è¦å¼€å‘è¯­è¨€
- **uv**: ä¾èµ–ç®¡ç†å’Œè™šæ‹ŸçŽ¯å¢ƒ
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **Ray**: åˆ†å¸ƒå¼è®¡ç®—æ¡†æž¶
- **FastAPI**: å¼‚æ­¥Webæ¡†æž¶
- **SQLAlchemy**: ORMæ¡†æž¶
- **Redis**: ç¼“å­˜å’ŒçŠ¶æ€å­˜å‚¨
- **Nacos**: é…ç½®ä¸­å¿ƒ

### ä¸»è¦ä¾èµ–
```python
dependencies = [
    "httpx", "uuid", "anyio", "build",
    "opentelemetry-api", "opentelemetry-sdk", 
    "opentelemetry-exporter-otlp", "opentelemetry-exporter-prometheus",
    "requests", "pydantic", "python-multipart", 
    "rich", "oss2"
]
```

### æ‰©å±•ä¾èµ–
```python
# Adminä¾èµ–
admin = ["ray[default]==2.43.0", "nacos-sdk-python>=0.1.14", 
         "redis", "apscheduler", "websockets>=15.0.1"]

# Rockletä¾èµ–  
rocklet = ["fastapi", "uvicorn", "pexpect", "bashlex", 
           "psutil", "twisted", "gem-llm>=0.1.0"]

# æž„å»ºä¾èµ–
builder = ["swebench", "gem-llm>=0.1.0", "docker"]
```

## åè®®æ”¯æŒ

### GEMåè®®å…¼å®¹æ€§
ROCKå®Œå…¨å…¼å®¹GEMæŽ¥å£æ ‡å‡†ï¼Œæä¾›æ ‡å‡†åŒ–çš„çŽ¯å¢ƒæŽ¥å£ï¼š

```python
# GEMæ ‡å‡†æŽ¥å£æ”¯æŒ
env.make(env_id)     # åˆ›å»ºçŽ¯å¢ƒå®žä¾‹
env.reset(seed)      # é‡ç½®çŽ¯å¢ƒçŠ¶æ€  
env.step(action)     # æ‰§è¡ŒåŠ¨ä½œå¹¶è¿”å›žç»“æžœ
```

GEMçŽ¯å¢ƒéµå¾ªæ ‡å‡†è¿”å›žæ ¼å¼ï¼š
```python
# reset() è¿”å›ž
observation, info = env.reset()

# step() è¿”å›ž  
observation, reward, terminated, truncated, info = env.step(action)
```

### å¤šåè®®æ”¯æŒ
- **GEMåè®®**: å¼ºåŒ–å­¦ä¹ çŽ¯å¢ƒæ ‡å‡†åè®®
- **Bashåè®®**: å‘½ä»¤è¡Œæ“ä½œåè®®
- **Chatåè®®**: èŠå¤©äº¤äº’åè®®
- **HTTPåè®®**: RESTful APIæŽ¥å£

## æ•°æ®æ¨¡åž‹

### æ ¸å¿ƒæ•°æ®ç±»
```python
# é…ç½®æ¨¡åž‹
@dataclass
class RockConfig:
    ray: RayConfig
    warmup: WarmupConfig  
    nacos: NacosConfig
    redis: RedisConfig
    sandbox_config: SandboxConfig
    oss: OssConfig
    runtime: RuntimeConfig
    proxy_service: ProxyServiceConfig

# çŽ¯å¢ƒä¿¡æ¯æ¨¡åž‹
@dataclass  
class EnvInfo:
    env_name: str
    image: str
    owner: str
    description: str
    tags: List[str]
    extra_spec: dict
    create_at: datetime
    update_at: datetime
```

### æ•°æ®åº“æ¨¡åž‹
- `RockDockerEnv`: DockerçŽ¯å¢ƒå­˜å‚¨æ¨¡åž‹
- åŒ…å«çŽ¯å¢ƒåç§°ã€é•œåƒã€æ‰€æœ‰è€…ã€æè¿°ã€æ ‡ç­¾ç­‰å­—æ®µ
- æ”¯æŒæ—¶é—´æˆ³è·Ÿè¸ªï¼ˆåˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ï¼‰

## éƒ¨ç½²æ¨¡å¼

### æœ¬åœ°éƒ¨ç½²
```bash
# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
source .venv/bin/activate

# å¯åŠ¨ç®¡ç†æœåŠ¡
rock admin start
```

### åˆ†å¸ƒå¼éƒ¨ç½²
- **AdminèŠ‚ç‚¹**: è°ƒåº¦ç®¡ç†æœåŠ¡
- **WorkerèŠ‚ç‚¹**: èµ„æºæ‰§è¡ŒèŠ‚ç‚¹  
- **RockletèŠ‚ç‚¹**: ä»£ç†æœåŠ¡èŠ‚ç‚¹
- æ”¯æŒè·¨æœºå™¨éƒ¨ç½²å’Œè´Ÿè½½å‡è¡¡

### å®¹å™¨åŒ–éƒ¨ç½²
- Dockerå®¹å™¨åŒ–éƒ¨ç½²
- æ”¯æŒèµ„æºé™åˆ¶å’Œéš”ç¦»
- é•œåƒæž„å»ºå’Œåˆ†å‘
- è‡ªåŠ¨æ¸…ç†æœºåˆ¶

## ç›‘æŽ§å’Œåº¦é‡

### æœåŠ¡çŠ¶æ€ç›‘æŽ§
- **ServiceStatus**: æœåŠ¡çŠ¶æ€è·Ÿè¸ª
- **PhaseStatus**: é˜¶æ®µæ€§çŠ¶æ€ç®¡ç†
- **Statusæžšä¸¾**: æˆåŠŸã€å¤±è´¥ã€è¿è¡Œä¸­ã€è¶…æ—¶ç­‰çŠ¶æ€

### æ€§èƒ½åº¦é‡
- **è¯·æ±‚å»¶è¿Ÿç›‘æŽ§**: HTTPè¯·æ±‚å¤„ç†æ—¶é—´
- **èµ„æºä½¿ç”¨ç›‘æŽ§**: CPUã€å†…å­˜ã€ç½‘ç»œä½¿ç”¨æƒ…å†µ
- **æ“ä½œåº¦é‡**: Sandboxæ“ä½œæˆåŠŸçŽ‡ç»Ÿè®¡
- **è‡ªåŠ¨å‘Šè­¦**: å¼‚å¸¸æƒ…å†µè‡ªåŠ¨é€šçŸ¥

### æ—¥å¿—ç³»ç»Ÿ
- **ç»“æž„åŒ–æ—¥å¿—**: JSONæ ¼å¼æ—¥å¿—è¾“å‡º
- **åˆ†çº§æ—¥å¿—**: DEBUGã€INFOã€WARNINGã€ERRORçº§åˆ«
- **ä¸Šä¸‹æ–‡è¿½è¸ª**: Sandbox IDã€ç”¨æˆ·IDã€æ“ä½œè·Ÿè¸ª
- **æ€§èƒ½åˆ†æž**: æ“ä½œè€—æ—¶ç»Ÿè®¡å’Œåˆ†æž

## å®‰å…¨ç‰¹æ€§

### èµ„æºéš”ç¦»
- **å®¹å™¨éš”ç¦»**: Dockerå®¹å™¨æŠ€æœ¯å®žçŽ°èµ„æºéš”ç¦»
- **è¿›ç¨‹éš”ç¦»**: Sandboxè¿›ç¨‹ç‹¬ç«‹è¿è¡Œ
- **ç½‘ç»œéš”ç¦»**: å®¹å™¨ç½‘ç»œé…ç½®å’Œè®¿é—®æŽ§åˆ¶

### æƒé™æŽ§åˆ¶
- **ç”¨æˆ·è®¤è¯**: æ”¯æŒç”¨æˆ·èº«ä»½éªŒè¯
- **è®¿é—®æŽ§åˆ¶**: APIè®¿é—®æƒé™æŽ§åˆ¶
- **èµ„æºé™åˆ¶**: CPUã€å†…å­˜ã€ç½‘ç»œèµ„æºé™åˆ¶

### æ•°æ®å®‰å…¨
- **é…ç½®åŠ å¯†**: æ•æ„Ÿé…ç½®ä¿¡æ¯åŠ å¯†å­˜å‚¨
- **æ—¥å¿—è„±æ•**: æ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è„±æ•
- **å®‰å…¨ä¼ è¾“**: HTTPSå’Œå®‰å…¨ä¼ è¾“åè®®

## ä½¿ç”¨ç¤ºä¾‹

### çŽ¯å¢ƒç®¡ç†ç¤ºä¾‹
```python
import rock
import random

# åˆ›å»ºçŽ¯å¢ƒ
env_id = "game:Sokoban-v0-easy"
env = rock.make(env_id)

# é‡ç½®çŽ¯å¢ƒ
observation, info = env.reset(seed=42)

# æ‰§è¡Œæ“ä½œ
while True:
    action = f"\\boxed{{{random.choice(['up', 'left', 'right', 'down'])}}}"
    observation, reward, terminated, truncated, info = env.step(action)
    
    if terminated or truncated:
        break

# æ¸…ç†çŽ¯å¢ƒ
env.close()
```

### Sandbox SDKç¤ºä¾‹
```python
import asyncio
from rock.actions import CreateBashSessionRequest
from rock.sdk.sandbox.client import Sandbox
from rock.sdk.sandbox.config import SandboxConfig

async def run_sandbox():
    config = SandboxConfig(image="python:3.11", memory="8g", cpus=2.0)
    sandbox = Sandbox(config)

    await sandbox.start()
    await sandbox.create_session(CreateBashSessionRequest(session="bash-1"))
    result = await sandbox.run(cmd="echo Hello Rock", session="bash-1")
    await sandbox.stop()

if __name__ == "__main__":
    asyncio.run(run_sandbox())
```

### çŽ¯å¢ƒæ³¨å†Œç¤ºä¾‹
```python
from rock.envhub.api.schemas import RegisterRequest

# æ³¨å†Œæ–°çŽ¯å¢ƒ
register_request = RegisterRequest(
    env_name="my-custom-env",
    image="my-registry.com/my-env:latest",
    owner="user@example.com", 
    description="Custom environment for testing",
    tags=["custom", "testing"],
    extra_spec={"config": "value"}
)

# é€šè¿‡SDKæˆ–APIæ³¨å†Œ
envhub.register(register_request)
```

## é…ç½®ç®¡ç†

### é…ç½®æ–‡ä»¶
```yaml
# rock-local.yml
ray:
  address: "auto"
  namespace: "xrl-sandbox"

runtime:
  enable_auto_clear: true
  project_root: "/path/to/project"
  
sandbox_config:
  actor_resource: "CPU:4"
  actor_resource_num: 4.0
  gateway_num: 1

redis:
  host: "localhost"
  port: 6379
```

### çŽ¯å¢ƒå˜é‡
```bash
export ROCK_CONFIG="/path/to/rock.yml"
export ROCK_PROJECT_ROOT="/path/to/project"
export ROCK_PYTHON_ENV_PATH="/path/to/python"
export ROCK_ENVHUB_DB_URL="sqlite:///path/to/envhub.db"
export ROCK_WORKER_ENV_TYPE="docker"
```

## æœ€ä½³å®žè·µ

### å¼€å‘å»ºè®®
1. **ä½¿ç”¨uvç®¡ç†çŽ¯å¢ƒ**: å¼ºçƒˆæŽ¨èä½¿ç”¨uvåˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
2. **åˆ†å¸ƒå¼ä¸€è‡´æ€§**: ç¡®ä¿æ‰€æœ‰æœºå™¨ä½¿ç”¨ç›¸åŒçš„Pythonè§£é‡Šå™¨é…ç½®
3. **ä¾èµ–ç®¡ç†**: ä½¿ç”¨uv syncå®‰è£…æ‰€æœ‰ä¾èµ–ç»„
4. **é…ç½®ç®¡ç†**: åˆç†ä½¿ç”¨é…ç½®æ–‡ä»¶å’ŒçŽ¯å¢ƒå˜é‡

### éƒ¨ç½²å»ºè®®
1. **èµ„æºè§„åˆ’**: æ ¹æ®å®žé™…éœ€æ±‚é…ç½®CPUã€å†…å­˜èµ„æº
2. **ç½‘ç»œé…ç½®**: åˆç†é…ç½®ç«¯å£æ˜ å°„å’Œç½‘ç»œç­–ç•¥
3. **ç›‘æŽ§å‘Šè­¦**: é…ç½®é€‚å½“çš„ç›‘æŽ§å’Œå‘Šè­¦æœºåˆ¶
4. **å®‰å…¨åŠ å›º**: å¯ç”¨å®‰å…¨ç‰¹æ€§å’Œè®¿é—®æŽ§åˆ¶

### æ€§èƒ½ä¼˜åŒ–
1. **é•œåƒä¼˜åŒ–**: ä½¿ç”¨è½»é‡çº§åŸºç¡€é•œåƒ
2. **ç¼“å­˜åˆ©ç”¨**: åˆç†é…ç½®Dockeré•œåƒç¼“å­˜
3. **èµ„æºè°ƒåº¦**: ä¼˜åŒ–Rayé›†ç¾¤é…ç½®
4. **æ•°æ®åº“ä¼˜åŒ–**: é…ç½®é€‚å½“çš„æ•°æ®åº“å‚æ•°

## æ•…éšœæŽ’æŸ¥

### å¸¸è§é—®é¢˜
1. **Dockerä¸å¯ç”¨**: æ£€æŸ¥DockeræœåŠ¡çŠ¶æ€å’Œæƒé™
2. **Rayé›†ç¾¤é—®é¢˜**: æ£€æŸ¥RayæœåŠ¡å’Œç½‘ç»œè¿žæŽ¥
3. **ä¾èµ–å®‰è£…å¤±è´¥**: æ£€æŸ¥ç½‘ç»œè¿žæŽ¥å’Œé•œåƒæº
4. **é…ç½®æ–‡ä»¶é”™è¯¯**: éªŒè¯YAMLæ ¼å¼å’Œè·¯å¾„é…ç½®

### è°ƒè¯•æŠ€å·§
1. **æ—¥å¿—åˆ†æž**: æŸ¥çœ‹è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
2. **çŠ¶æ€æ£€æŸ¥**: ä½¿ç”¨APIæ£€æŸ¥æœåŠ¡çŠ¶æ€
3. **èµ„æºç›‘æŽ§**: ç›‘æŽ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
4. **ç½‘ç»œæµ‹è¯•**: æµ‹è¯•ç½‘ç»œè¿žæŽ¥å’Œç«¯å£å¯è¾¾æ€§

## æ‰©å±•å¼€å‘

### è‡ªå®šä¹‰éƒ¨ç½²
1. ç»§æ‰¿`AbstractDeployment`ç±»
2. å®žçŽ°å¿…è¦çš„æ–¹æ³•
3. æ³¨å†Œåˆ°éƒ¨ç½²ç®¡ç†å™¨

### åè®®æ‰©å±•
1. å®žçŽ°æ–°çš„åè®®å¤„ç†å™¨
2. æ·»åŠ åè®®æ”¯æŒåˆ°SDK
3. æ›´æ–°CLIå’ŒAPIæŽ¥å£

### æ’ä»¶å¼€å‘
1. å¼€å‘è‡ªå®šä¹‰æ’ä»¶
2. å®žçŽ°æ’ä»¶æŽ¥å£
3. é›†æˆåˆ°RockletæœåŠ¡

## ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: v0.2.1
- **Pythonè¦æ±‚**: >=3.10, <4.0
- **è®¸å¯è¯**: Apache 2.0
- **å¼€å‘å›¢é˜Ÿ**: é˜¿é‡Œå·´å·´æ·˜å¤©æœªæ¥ç”Ÿæ´»å®žéªŒå®¤ & é˜¿é‡ŒAIå¼•æ“Žå›¢é˜Ÿ

## è´¡çŒ®æŒ‡å—

### å¼€å‘çŽ¯å¢ƒè®¾ç½®
1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æ·»åŠ å¿…è¦æµ‹è¯•
4. æäº¤Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ªçŽ°æœ‰ä»£ç é£Žæ ¼
- è¿è¡Œæµ‹è¯•ç¡®ä¿è´¨é‡
- æ·»åŠ é€‚å½“æ–‡æ¡£å’Œæ³¨é‡Š
- éµå¾ªå®‰å…¨æœ€ä½³å®žè·µ

---

*æœ¬æ–‡æ¡£åŸºäºŽROCKé¡¹ç›®æºä»£ç åˆ†æžç”Ÿæˆï¼Œè¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯è¯·å‚è€ƒé¡¹ç›®GitHubä»“åº“ã€‚*